# WordPress コンテンツ管理ガイド

このドキュメントでは、WordPressでコンテンツを管理し、Next.jsサイトに反映させる方法を解説します。

## 目次

1. [記事の作成](#記事の作成)
2. [カテゴリーの管理](#カテゴリーの管理)
3. [固定ページの作成](#固定ページの作成)
4. [リンクの仕組み](#リンクの仕組み)
5. [よくある質問](#よくある質問)

---

## 記事の作成

### 基本的な手順

1. WordPressダッシュボードにログイン
2. **投稿 → 新規追加** をクリック
3. タイトルと本文を入力
4. カテゴリーを設定
5. アイキャッチ画像を設定（推奨）
6. 「公開」をクリック

### 記事が表示されるURL

```
https://your-domain.com/posts/[記事のスラッグ]
```

例:
- スラッグ: `hello-world`
- URL: `https://your-domain.com/posts/hello-world`

### アイキャッチ画像の推奨サイズ

- **サイズ**: 1200x630px（推奨）
- **形式**: JPG, PNG
- **容量**: 500KB以下（最適化推奨）

### 反映までの時間

- **ローカル環境**: すぐに反映
- **本番環境**: 最大60秒（ISRの設定による）

---

## カテゴリーの管理

### カテゴリーの作成

1. WordPressダッシュボード
2. **投稿 → カテゴリー** をクリック
3. 以下を入力:
   - **名前**: カテゴリー名（例: フレームワーク）
   - **スラッグ**: URLに使用される文字列（例: framework）
   - **説明**: カテゴリーの説明（オプション）
4. 「新規カテゴリーを追加」をクリック

### カテゴリーページのURL

```
https://your-domain.com/category/[カテゴリースラッグ]
```

例:
- カテゴリー名: フレームワーク
- スラッグ: `framework`
- URL: `https://your-domain.com/category/framework`

### ヘッダーに表示されるカテゴリー

現在、ヘッダーには以下のカテゴリーが表示されます:

- フレームワーク (`/category/framework`)
- マーケティング (`/category/marketing`)
- デザイン (`/category/design`)
- ビジネス (`/category/business`)
- 事例 (`/category/case-study`)
- インタビュー (`/category/interview`)

**これらのスラッグでカテゴリーを作成すると、自動的にリンクが機能します。**

### カテゴリーの管理

#### 記事にカテゴリーを設定

1. 記事編集画面の右側「カテゴリー」パネル
2. 該当するカテゴリーにチェックを入れる
3. 複数選択可能

#### カテゴリーの変更

1. **投稿 → カテゴリー**
2. 変更したいカテゴリーにカーソルを合わせる
3. 「編集」をクリック
4. 内容を変更して「更新」

---

## 固定ページの作成

### 固定ページとは

固定ページは、記事とは異なる静的なコンテンツ用です。

- このサイトについて
- お問い合わせ
- プライバシーポリシー
- 利用規約
- 会社概要
- サービス紹介ページ

など。

### 固定ページの作成手順

1. WordPressダッシュボード
2. **固定ページ → 新規追加** をクリック
3. タイトルと本文を入力
4. 「公開」をクリック

### 固定ページのURL

```
https://your-domain.com/[ページのスラッグ]
```

例:
- スラッグ: `about`
- URL: `https://your-domain.com/about`

### リンクで使用されている固定ページ

現在、サイトでリンクされている固定ページ:

| ページ名 | スラッグ | URL |
|---------|---------|-----|
| このサイトについて | `about` | `/about` |
| お問い合わせ | `contact` | `/contact` |
| 事業診断 | `diagnosis` | `/diagnosis` |
| レポート作成 | `report` | `/report` |
| コンサルティング | `consulting` | `/consulting` |
| 運営会社 | `company` | `/company` |
| プライバシーポリシー | `privacy` | `/privacy` |
| 利用規約 | `terms` | `/terms` |
| 特定商取引法 | `law` | `/law` |

**これらのスラッグで固定ページを作成すると、ヘッダーとフッターのリンクが自動的に機能します。**

### 固定ページの作成例

#### 1. 「このサイトについて」ページ

```
タイトル: このサイトについて
スラッグ: about
内容:
おてまえ未病ハブは、東洋医学と西洋医学の視点をつなぎ、
未病ケアの実践知を紹介するウェブメディアです。
オンライン保険調剤、東洋／西洋薬学、カラダの仕組み、
イベント情報などを発信しています。
```

#### 2. 「お問い合わせ」ページ

```
タイトル: お問い合わせ
スラッグ: contact
内容:
お問い合わせは以下のフォームからお願いします...
[Contact Form 7などのプラグインで問い合わせフォームを設置]
```

#### 3. 「プライバシーポリシー」ページ

```
タイトル: プライバシーポリシー
スラッグ: privacy
内容:
当サイトは、個人情報保護に関する法令を遵守し...
```

---

## リンクの仕組み

### URL構造

```
https://your-domain.com/
├── /                        # トップページ
├── /posts/[slug]            # 記事詳細ページ
├── /category/[slug]         # カテゴリーページ
└── /[slug]                  # 固定ページ
```

### 自動生成されるページ

#### 1. トップページ (`/`)

- 最新記事30件を表示
- カテゴリー一覧をサイドバーに表示

#### 2. 記事詳細ページ (`/posts/[slug]`)

- 記事タイトル
- 本文
- アイキャッチ画像
- カテゴリー
- 公開日・更新日

#### 3. カテゴリーページ (`/category/[slug]`)

- カテゴリー名
- カテゴリーの説明
- そのカテゴリーに属する記事一覧

#### 4. 固定ページ (`/[slug]`)

- ページタイトル
- 本文
- アイキャッチ画像（オプション）
- 公開日・更新日

---

## よくある質問

### Q1. 記事を公開したのに表示されない

**A:** 以下を確認してください:

1. 記事のステータスが「公開」になっているか
2. WPGraphQLプラグインが有効化されているか
3. ローカル環境: ブラウザをリロード
4. 本番環境: 最大60秒待つ（ISR）

### Q2. カテゴリーページが404エラーになる

**A:** 以下を確認してください:

1. WordPressでカテゴリーが作成されているか
2. カテゴリーのスラッグが正しいか
3. カテゴリーに記事が1件以上割り当てられているか（`hideEmpty: true`の設定による）

### Q3. 固定ページが404エラーになる

**A:** 以下を確認してください:

1. WordPressで固定ページが作成されているか
2. ページのステータスが「公開」になっているか
3. スラッグが正しいか（日本語ではなく英数字）

### Q4. ヘッダーのリンクを変更したい

**A:** 以下のファイルを編集してください:

```typescript
// components/Header.tsx
<Link href="/category/your-category" className="...">
  カスタムカテゴリー
</Link>
```

### Q5. アイキャッチ画像が表示されない

**A:** 以下を確認してください:

1. 記事にアイキャッチ画像が設定されているか
2. `next.config.ts`でWordPressのドメインが許可されているか

```typescript
// next.config.ts
images: {
  remotePatterns: [
    {
      protocol: 'https',
      hostname: 'your-wordpress-domain.com', // WordPressのドメイン
    },
  ],
}
```

### Q6. 記事のURLを変更したい

**A:**

1. WordPress記事編集画面で「パーマリンク」セクション
2. スラッグを変更
3. 「更新」をクリック

**注意:** URLを変更すると、古いURLは404エラーになります。

### Q7. 記事を削除したい

**A:**

1. **投稿 → 投稿一覧**
2. 削除したい記事にカーソルを合わせる
3. 「ゴミ箱へ移動」をクリック
4. 本番環境では最大60秒後に削除が反映されます

### Q8. カテゴリーの順序を変更したい

**A:** カテゴリーの表示順序は、WordPressのカテゴリー一覧で並び替えできます。プラグイン「Category Order and Taxonomy Terms Order」を使用すると、ドラッグ&ドロップで順序変更が可能です。

---

## 高度な設定

### カスタムフィールドを追加

WordPress側でAdvanced Custom Fields (ACF)プラグインを使用すると、記事や固定ページにカスタムフィールドを追加できます。

**手順:**

1. ACFプラグインをインストール
2. フィールドグループを作成
3. WPGraphQLと連携（WPGraphQL for ACFプラグイン）
4. Next.js側でGraphQLクエリを更新

### メニューをWordPressで管理

現在、ヘッダーのナビゲーションはハードコードされていますが、WordPressのメニュー機能と連携できます。

**必要な手順:**

1. `lib/wordpress.ts`にメニュー取得関数を追加
2. `components/Header.tsx`を動的に変更

---

## まとめ

### 必須設定

1. ✅ カテゴリーを作成（framework, marketing, design, business など）
2. ✅ 固定ページを作成（about, contact, privacy, terms など）
3. ✅ 記事を作成（最低3件以上推奨）
4. ✅ アイキャッチ画像を設定

### 推奨設定

- [ ] 各カテゴリーに説明文を追加
- [ ] SEOプラグイン（Yoast SEO）をインストール
- [ ] サイトマッププラグインをインストール
- [ ] Google Analyticsを設定

---

**最終更新:** 2025-11-10
